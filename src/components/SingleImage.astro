---
// SingleImage.astro
import ZoomImage from './ZoomImage.astro';

interface Props {
  img: string;      // Changed from ImageMetadata to string
  label?: string;
  caption?: string;
  width?: number;   // The natural width of the R2 asset
  height?: number;  // The natural height of the R2 asset
}

const { img, label, caption, width = 1200, height = 800 } = Astro.props; 
---

<figure class="my-12 pswp-gallery">
  <div class="flex flex-col">
    <div 
      aria-hidden="true" 
      class="border-t border-black pt-1 mb-2 text-[9px] uppercase tracking-widest text-brand-black/50 font-mono"
    >
      {label || "Source_01"}
    </div>

    <ZoomImage 
      src={img} 
      alt={caption || label || "Descriptive image"} 
      width={width} 
      height={height}
      imageClass="border border-black/5"
    />
  </div>

  {caption && (
    <figcaption class="font-mono text-[10px] mt-4 text-brand-black/60 uppercase leading-relaxed max-w-2xl">
      <span class="sr-only">Description: </span>
      {caption}
    </figcaption>
  )}
</figure>