---
// AIWrapper.astro
import SingleImage from './SingleImage.astro';

interface Props {
  img: string;
  prompt: string;
  label?: string;
  caption?: string;
  model?: string;
  width?: number;   // Original Asset Width
  height?: number;  // Original Asset Height
}

const { 
  img, 
  prompt, 
  label, 
  caption, 
  model, 
  width = 1200, 
  height = 800 
} = Astro.props;
---

<div class="grid grid-cols-1 md:grid-cols-12 gap-8 items-start">
  
  <div class="md:col-span-7">
    <SingleImage 
      img={img} 
      label={label || "AI_GENERATED_VISUAL"} 
      caption={caption} 
      width={width} 
      height={height}
    />
  </div>

  <aside class="md:col-span-5 flex flex-col pt-0 md:pt-[1px] my-12">
    <div class="border-t border-black pt-1 mb-4 flex justify-between items-center">
        <span class="font-mono text-[9px] uppercase tracking-widest text-brand-black/50">Prompt_Metadata</span>
        {model && <span class="font-mono text-[9px] text-brand-black/30">[{model}]</span>}
    </div>
    
    <div class="flex flex-col gap-4">
        <div class="relative group">
            <div class="relative">
              <div class="bg-neutral-50 p-4 border border-black/5 font-mono text-[11px] leading-relaxed text-brand-black/80 
                          max-h-[500px] overflow-y-auto 
                          scrollbar-thin scrollbar-thumb-black/10 scrollbar-track-transparent
                          selection:bg-black selection:text-white">
                  <span class="opacity-20 select-none">INPUT:</span> {prompt}
              </div>
              
              <div class="absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-neutral-50 to-transparent pointer-events-none opacity-60"></div>
            </div>
            <div class="mt-2 flex justify-between items-center">
                <span class="font-mono text-[8px] uppercase text-black/20 italic">Encapsulated_String</span>
                <span class="font-mono text-[8px] uppercase text-black/20 bg-black/5 px-1">UTF-8</span>
            </div>
        </div>
    </div>
  </aside>
</div>